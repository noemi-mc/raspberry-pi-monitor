<!DOCTYPE html>
<html>
<head>
	<title>Raspberry Pi Monitor</title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
	<h1>Raspberry Pi Metrics</h1>
	<canvas id="metricsChart" width="800" height="400"></canvas>

	<script>
	async function fetchData() {
		const res = await fetch("/data");
		return await res.json();
	}

	async function drawChart() {
		const data = await fetchData();
		const labels = data.map(row => row.timestamp);
		const cpu = data.map(row => row.cpu);
		const memory = data.map(row => row.memory);
		const disk = data.map(row => row.disk);

		const ctx = document.getElementById('metricsChart').getContext('2d');
		new Chart(ctx, {
			type: 'line',
			data: {
				labels,
				datasets: [
					{ label: 'CPU Usage (%)', data: cpu, borderColor: 'red', fill: false },
					{ label: 'Memory Usage (%)', data: memory, borderColor: 'blue', fill: false },
					{ label: 'Disk Usage (%)', data: disk, borderColor: 'green', fill: false }
				]
			},
			options: { responsive: true, scales: { y: { min: 0, max: 100 }}}
		});
	}

	drawChart();
	</script>
</body>
</html>

